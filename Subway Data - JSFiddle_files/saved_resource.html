<!DOCTYPE html>
<!-- saved from url=(0057)https://fiddle.jshell.net/crdotx/edtoxkph/429/show/light/ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>Subway Data</title>
    
    <meta name="robots" content="noindex, nofollow">
    <meta name="googlebot" content="noindex, nofollow">
    <meta name="viewport" content="width=device-width, initial-scale=1">



    <script type="text/javascript" src="./dummy.js.download"></script>

        <script type="text/javascript" src="./airtable.umd.min.js.download"></script>


    <style id="compiled-css" type="text/css">
      /* http://meyerweb.com/eric/tools/css/reset/ 
   v2.0 | 20110126
   License: none (public domain)
*/

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
	margin: 0;
	padding: 0;
	border: 0;
	font-size: 100%;
	font: inherit;
	vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
	display: block;
}
body {
	line-height: 1;
}
ol, ul {
	list-style: none;
}
blockquote, q {
	quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
	content: '';
	content: none;
}
table {
	border-collapse: collapse;
	border-spacing: 0;
}

/* END CSS RESET */

body {
  font-family: "Host Grotesk", sans-serif;
  font-optical-sizing: auto;
  font-weight: 400;
  font-style: normal;
  --point-size: 8px;
}

.data-point {
  width: var(--point-size);
  border-radius: 50%;
  aspect-ratio: 1 / 1;
  background-color: var(--line-color);
  transform: translateX(-50%);
  transition: 1s cubic-bezier(0.5,0,0.5,1);
}

.container {
  position: relative;
  width: 100%;
  height: 100%;
}

.filler {
  position: absolute;
  top: 0px;
  left: 0px;
  width: 100%;
  height: 100%;
}

#graph-wrapper {
  position: relative;
  width: 100vw;
  height: 100vh;
  box-sizing: border-box;
  padding: 4em;
  overflow: hidden;
  display: grid;
  grid-template-columns: 1fr;
  grid-template-rows: 3em 1fr;
  grid-column-gap: 0px;
  grid-row-gap: 0px;
}

#graph-area {
  position: relative;
  width: 100%;
  height: 100%;
}

#graph-controls {
  width: 100%;
  box-sizing: border-box;
  display: flex;
  flex-direction: row;
  flex-wrap: nowrap;
  gap: 16px;
  justify-content: flex-start;
}

#graph-controls > button {
  outline: none;
  border: none;
  padding: 0px;
  margin: 0px;
  font-family: "Host Grotesk", sans-serif;
  font-optical-sizing: auto;
  font-weight: 600;
  font-size: 2em;
  font-style: normal;
}

h1 {
  font-family: "Host Grotesk", sans-serif;
  font-optical-sizing: auto;
  font-weight: 600;
  font-size: 2em;
  font-style: normal;
}

body {
  background-color: #eeeeee;
}

#graph-controls > input[type="radio"] {
  display: none;
}

label {
    color: gray;
    transition: 0.25s ease;
}
input[type="radio"]:checked + label { 
    color: black;
}

.tool-tip-wrapper {
  position: relative;
  width: 100%;
  height: 100%;
  opacity: 0;
  transition: 0.125s ease;
}

.tool-tip-point-outline {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: calc(100% + 0px);
  aspect-ratio: 1 / 1;
  background-color: var(--line-color);
  border-radius: 50%;
  transition: 0.25s cubic-bezier(.375,0,.375,1);
}

.tool-tip {
  position: absolute;
  background-color: white;
  border-radius: 4px;
  box-shadow: 0px 4px 4px rgba(0,0,0,.05);
  padding: 8px;
  display: flex;
  flex-direction: column;
  flex-wrap: nowrap;
  gap: 4px;
  transform: translateX(8px);
  z-index: 10;
  pointer-events: none;
  transition: 0.25s ease;
}

.card-group {
  display: flex;
  flex-direction: row;
  flex-wrap: nowrap;
  gap: 8px;
}

h3 {
  font-size: 16px;
  font-weight: 800;
}

h4 {
  font-size: 12px;
}

.data-point:hover > .tool-tip-wrapper {
  opacity: 1;
}

.data-point:hover > .tool-tip-wrapper > .tool-tip-point-outline {
  width: calc(100% + 4px);
}

.blue-line {
  --line-color: #0039a6;
}

.orange-line {
  --line-color: #ff6319;
}

.lime-line {
  --line-color: #6cbe45;
}

.light-gray-line {
  --line-color: #a7a9ac;
}

.brown-line {
  --line-color: #996633;
}

.yellow-line {
  --line-color: #fccc0a;
}

.red-line {
  --line-color: #ee352e;
}

.green-line {
  --line-color: #00933c;
}

.purple-line {
  --line-color: #b933ad;
}

.turquoise-line {
  --line-color: #00add0;
}

.gray-line {
  --line-color: #808183;
}

#graph-axis-wrapper {
  color: gray;
}

#graph-axis-wrapper > h3 {
  position: absolute;
  top: calc(50% + 2em);
  transform: translate(0%, -50%);
}

#axis-minimum {
  left: 0px;
  text-align: left;
}

#axis-maximum {
  right: 0px;
  text-align: right;
}

#graph-points {
  padding-left: calc(var(--point-size)/2);
  padding-right: calc(var(--point-size)/2);
  box-sizing: border-box;
}

      /* EOS */
    </style>

    <style type="text/css">
      :root {
        color-scheme: light;
      }
    </style>

    <script id="insert"></script>

  </head>
  <body>
    <link rel="preconnect" href="https://fonts.googleapis.com/">
<link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="">
<link href="./css2" rel="stylesheet">
<div id="graph-wrapper">
  <div id="graph-controls">
    <h1>Sort by</h1>
    <input type="radio" id="number-sort" name="sort" value="number" checked="">
    <label for="number-sort" onclick="graphPointsByNumber()">
      <h1>Number</h1>
    </label>
    <input type="radio" id="type-sort" name="sort" value="type">
    <label for="type-sort" onclick="graphPointsByType()">
      <h1>Type</h1>
    </label>
    <input type="radio" id="date-sort" name="sort" value="date">
    <label for="date-sort" onclick="graphPointsByDate()">
      <h1>Date</h1>
    </label>
    <input type="radio" id="time-sort" name="sort" value="time">
    <label for="time-sort" onclick="graphPointsByTime()">
      <h1>Time</h1>
    </label>
  </div>
  <div id="graph-area">
    <div id="graph-data-wrapper" class="container">
    <div id="graph-axis" class="filler">
        <div id="graph-axis-wrapper" class="container">
          <h3 id="axis-minimum">1376</h3>
          <h3 id="axis-maximum">9850</h3>
        </div>
      </div>
      <div id="graph-points" class="filler">
        <div id="graph-points-wrapper" class="container">
        <div id="recfd1l2RgVK4SXBH" class="data-point red-line" style="position: absolute; transition-delay: 0s; top: calc(50% + 0px); left: 0%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>1376</h3><div class="card-group"><h4>R62</h4><h4>3</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recnr6Y7RiX3erYUr" class="data-point red-line" style="position: absolute; transition-delay: 0.005s; top: calc(50% - 10px); left: 0%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>1387</h3><div class="card-group"><h4>R62</h4><h4>3</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="reclJH4F9MMKDCOkj" class="data-point red-line" style="position: absolute; transition-delay: 0.01s; top: calc(50% - 20px); left: 0%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>1394</h3><div class="card-group"><h4>R62</h4><h4>3</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="rece3UdxxMxtIPY3J" class="data-point red-line" style="position: absolute; transition-delay: 0.015s; top: calc(50% - 30px); left: 0%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>1400</h3><div class="card-group"><h4>R62</h4><h4>3</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recHOB8bLJD4K9aib" class="data-point red-line" style="position: absolute; transition-delay: 0.02s; top: calc(50% - 40px); left: 0%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>1523</h3><div class="card-group"><h4>R62</h4><h4>3</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recTIflL51AxSqmRc" class="data-point red-line" style="position: absolute; transition-delay: 0.025s; top: calc(50% - 50px); left: 0%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>1534</h3><div class="card-group"><h4>R62</h4><h4>3</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recYgI6ZdB6316RJ8" class="data-point green-line" style="position: absolute; transition-delay: 0.03s; top: calc(50% + 0px); left: 12.5%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>1728</h3><div class="card-group"><h4>R62A</h4><h4>6</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recU7KH9jGYLQ25Gu" class="data-point green-line" style="position: absolute; transition-delay: 0.035s; top: calc(50% - 10px); left: 12.5%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>1756</h3><div class="card-group"><h4>R62A</h4><h4>6</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="rec14w1xfnTE5LZRi" class="data-point green-line" style="position: absolute; transition-delay: 0.04s; top: calc(50% - 20px); left: 12.5%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>1972</h3><div class="card-group"><h4>R62A</h4><h4>6</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recsulPhfRjf3MTv6" class="data-point orange-line" style="position: absolute; transition-delay: 0.045s; top: calc(50% + 0px); left: 25%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>2734</h3><div class="card-group"><h4>R68</h4><h4>D</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="reccgtAlBDW8Ow2ht" class="data-point yellow-line" style="position: absolute; transition-delay: 0.05s; top: calc(50% - 10px); left: 25%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>2786</h3><div class="card-group"><h4>R68</h4><h4>Q</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recbJQ7GxBt7cDuNJ" class="data-point gray-line" style="position: absolute; transition-delay: 0.055s; top: calc(50% - 20px); left: 25%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>2918</h3><div class="card-group"><h4>R68</h4><h4>S</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recrJaheSbSMWkcUy" class="data-point gray-line" style="position: absolute; transition-delay: 0.06s; top: calc(50% - 30px); left: 25%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>2920</h3><div class="card-group"><h4>R68</h4><h4>S</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recpW4ZexgvR0vnVl" class="data-point gray-line" style="position: absolute; transition-delay: 0.065s; top: calc(50% - 40px); left: 25%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>2923</h3><div class="card-group"><h4>R68</h4><h4>S</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recv0p4QSbkho4R9z" class="data-point gray-line" style="position: absolute; transition-delay: 0.07s; top: calc(50% - 50px); left: 25%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>2924</h3><div class="card-group"><h4>R68</h4><h4>S</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recJ0UowIrjoWZxVp" class="data-point gray-line" style="position: absolute; transition-delay: 0.075s; top: calc(50% - 60px); left: 25%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>2924</h3><div class="card-group"><h4>R68</h4><h4>S</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recDEZagsvKaBaMgs" class="data-point blue-line" style="position: absolute; transition-delay: 0.08s; top: calc(50% + 0px); left: 37.5%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>3148</h3><div class="card-group"><h4>R179</h4><h4>C</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recZsPHQ81Gijvg0I" class="data-point blue-line" style="position: absolute; transition-delay: 0.085s; top: calc(50% - 10px); left: 37.5%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>3149</h3><div class="card-group"><h4>R179</h4><h4>C</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recSOGDik8TbGlso4" class="data-point blue-line" style="position: absolute; transition-delay: 0.09s; top: calc(50% - 20px); left: 37.5%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>3150</h3><div class="card-group"><h4>R179</h4><h4>C</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recipwflzC9pWhS6t" class="data-point blue-line" style="position: absolute; transition-delay: 0.095s; top: calc(50% - 30px); left: 37.5%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>3163</h3><div class="card-group"><h4>R179</h4><h4>C</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="rec9auf8cxtfpQHwC" class="data-point blue-line" style="position: absolute; transition-delay: 0.1s; top: calc(50% - 40px); left: 37.5%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>3186</h3><div class="card-group"><h4>R179</h4><h4>C</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recJcqxRYxhwfZOoV" class="data-point blue-line" style="position: absolute; transition-delay: 0.105s; top: calc(50% - 50px); left: 37.5%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>3228</h3><div class="card-group"><h4>R179</h4><h4>C</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="reck7DtI1KH1Sqbqs" class="data-point blue-line" style="position: absolute; transition-delay: 0.11s; top: calc(50% + 0px); left: 50%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>4059</h3><div class="card-group"><h4>R211T</h4><h4>C</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="rec1yjZKPypV2N9VS" class="data-point blue-line" style="position: absolute; transition-delay: 0.115s; top: calc(50% + 0px); left: 62.5%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>4142</h3><div class="card-group"><h4>R211A</h4><h4>C</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recKzyO3nkNDmOJGp" class="data-point blue-line" style="position: absolute; transition-delay: 0.12s; top: calc(50% - 10px); left: 62.5%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>4152</h3><div class="card-group"><h4>R211A</h4><h4>A</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recAR0Y7Amibb06T9" class="data-point blue-line" style="position: absolute; transition-delay: 0.125s; top: calc(50% - 20px); left: 62.5%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>4159</h3><div class="card-group"><h4>R211A</h4><h4>A</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recje9DjVQNAAkJhi" class="data-point blue-line" style="position: absolute; transition-delay: 0.13s; top: calc(50% - 30px); left: 62.5%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>4205</h3><div class="card-group"><h4>R211A</h4><h4>A</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recBcZPsPfk9TnWXv" class="data-point blue-line" style="position: absolute; transition-delay: 0.135s; top: calc(50% - 40px); left: 62.5%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>4211</h3><div class="card-group"><h4>R211A</h4><h4>A</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recU0Kx891ntqXtoQ" class="data-point blue-line" style="position: absolute; transition-delay: 0.14s; top: calc(50% - 50px); left: 62.5%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>4225</h3><div class="card-group"><h4>R211A</h4><h4>C</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="reczfXgTukdj4Gkdt" class="data-point blue-line" style="position: absolute; transition-delay: 0.145s; top: calc(50% - 60px); left: 62.5%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>4241</h3><div class="card-group"><h4>R211A</h4><h4>A</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recU21QT3gSY2noJd" class="data-point blue-line" style="position: absolute; transition-delay: 0.15s; top: calc(50% - 70px); left: 62.5%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>4244</h3><div class="card-group"><h4>R211A</h4><h4>A</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="reckWjyyXcaMmhThb" class="data-point blue-line" style="position: absolute; transition-delay: 0.155s; top: calc(50% - 80px); left: 62.5%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>4256</h3><div class="card-group"><h4>R211A</h4><h4>C</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="rec6fyfWtwOIlWAuw" class="data-point blue-line" style="position: absolute; transition-delay: 0.16s; top: calc(50% - 90px); left: 62.5%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>4357</h3><div class="card-group"><h4>R211A</h4><h4>A</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recPpMxwl2umwVrx6" class="data-point blue-line" style="position: absolute; transition-delay: 0.165s; top: calc(50% - 100px); left: 62.5%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>4372</h3><div class="card-group"><h4>R211A</h4><h4>A</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recwuFmwE8AfXBr7u" class="data-point blue-line" style="position: absolute; transition-delay: 0.17s; top: calc(50% + 0px); left: 75%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>5900</h3><div class="card-group"><h4>R46</h4><h4>A</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="rec6ppWWyLWHUVC1J" class="data-point blue-line" style="position: absolute; transition-delay: 0.175s; top: calc(50% - 10px); left: 75%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>5902</h3><div class="card-group"><h4>R46</h4><h4>C</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recRdaEqniPyhbsbo" class="data-point blue-line" style="position: absolute; transition-delay: 0.18s; top: calc(50% - 20px); left: 75%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>5969</h3><div class="card-group"><h4>R46</h4><h4>C</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="rectcrNqcgRdiNBrf" class="data-point blue-line" style="position: absolute; transition-delay: 0.185s; top: calc(50% - 30px); left: 75%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>6026</h3><div class="card-group"><h4>R46</h4><h4>A</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recizKXD9uPKflF4O" class="data-point blue-line" style="position: absolute; transition-delay: 0.19s; top: calc(50% - 40px); left: 75%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>6029</h3><div class="card-group"><h4>R46</h4><h4>A</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recT3JlRzZPzmAKvN" class="data-point blue-line" style="position: absolute; transition-delay: 0.195s; top: calc(50% - 50px); left: 75%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>6069</h3><div class="card-group"><h4>R46</h4><h4>A</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recHGLjLo659uuoZn" class="data-point blue-line" style="position: absolute; transition-delay: 0.2s; top: calc(50% - 60px); left: 75%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>6122</h3><div class="card-group"><h4>R46</h4><h4>A</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recUNrfqPeTIzA9ZB" class="data-point blue-line" style="position: absolute; transition-delay: 0.205s; top: calc(50% - 70px); left: 75%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>6126</h3><div class="card-group"><h4>R46</h4><h4>C</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="rec9YJ8xO3TUhivS0" class="data-point blue-line" style="position: absolute; transition-delay: 0.21s; top: calc(50% - 80px); left: 75%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>6155</h3><div class="card-group"><h4>R46</h4><h4>C</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recYnN3wWts8D2ROO" class="data-point blue-line" style="position: absolute; transition-delay: 0.215s; top: calc(50% - 90px); left: 75%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>6156</h3><div class="card-group"><h4>R46</h4><h4>A</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recQQGimXmZTGpysS" class="data-point blue-line" style="position: absolute; transition-delay: 0.22s; top: calc(50% - 100px); left: 75%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>6157</h3><div class="card-group"><h4>R46</h4><h4>A</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recYxxepk7SEjzco6" class="data-point blue-line" style="position: absolute; transition-delay: 0.225s; top: calc(50% - 110px); left: 75%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>6228</h3><div class="card-group"><h4>R46</h4><h4>C</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recym1cca5GfGINsq" class="data-point red-line" style="position: absolute; transition-delay: 0.23s; top: calc(50% + 0px); left: 87.5%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>6609</h3><div class="card-group"><h4>R142</h4><h4>2</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="rec3AtghT8QMi6G1Y" class="data-point red-line" style="position: absolute; transition-delay: 0.235s; top: calc(50% - 10px); left: 87.5%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>6713</h3><div class="card-group"><h4>R142</h4><h4>2</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recDiGfBkxQzq7Ehx" class="data-point green-line" style="position: absolute; transition-delay: 0.24s; top: calc(50% - 20px); left: 87.5%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>6875</h3><div class="card-group"><h4>R142</h4><h4>5</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recbOdR37U33RdPb8" class="data-point yellow-line" style="position: absolute; transition-delay: 0.245s; top: calc(50% + 0px); left: 100%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>8712</h3><div class="card-group"><h4>R160</h4><h4>R</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="rec2flPJg0ufo1xDq" class="data-point orange-line" style="position: absolute; transition-delay: 0.25s; top: calc(50% - 10px); left: 100%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>8849</h3><div class="card-group"><h4>R160</h4><h4>F</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recIki70GSAeNUJNo" class="data-point orange-line" style="position: absolute; transition-delay: 0.255s; top: calc(50% - 20px); left: 100%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>8955</h3><div class="card-group"><h4>R160</h4><h4>F</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recv9OCYwqYQQ3Xcf" class="data-point orange-line" style="position: absolute; transition-delay: 0.26s; top: calc(50% - 30px); left: 100%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>8957</h3><div class="card-group"><h4>R160</h4><h4>F</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recSkI5SLhgNlmCYh" class="data-point orange-line" style="position: absolute; transition-delay: 0.265s; top: calc(50% - 40px); left: 100%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>9106</h3><div class="card-group"><h4>R160</h4><h4>F</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="reczXwG9CrxswY4IT" class="data-point lime-line" style="position: absolute; transition-delay: 0.27s; top: calc(50% - 50px); left: 100%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>9234</h3><div class="card-group"><h4>R160</h4><h4>G</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="receDXxt7hzOCydiB" class="data-point orange-line" style="position: absolute; transition-delay: 0.275s; top: calc(50% - 60px); left: 100%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>9440</h3><div class="card-group"><h4>R160</h4><h4>F</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="rectmGp9mBkn1KYeV" class="data-point orange-line" style="position: absolute; transition-delay: 0.28s; top: calc(50% - 70px); left: 100%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>9486</h3><div class="card-group"><h4>R160</h4><h4>F</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recksamctoTtYWEIp" class="data-point yellow-line" style="position: absolute; transition-delay: 0.285s; top: calc(50% - 80px); left: 100%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>9806</h3><div class="card-group"><h4>R160</h4><h4>R</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="rectM9euiD9vGaQ6z" class="data-point yellow-line" style="position: absolute; transition-delay: 0.29s; top: calc(50% - 90px); left: 100%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>9830</h3><div class="card-group"><h4>R160</h4><h4>R</h4></div></div><div class="tool-tip-point-outline"></div></div></div><div id="recBeV4s1nZAdE7FU" class="data-point orange-line" style="position: absolute; transition-delay: 0.295s; top: calc(50% - 100px); left: 100%;"><div class="tool-tip-wrapper"><div class="tool-tip"><h3>9850</h3><div class="card-group"><h4>R160</h4><h4>F</h4></div></div><div class="tool-tip-point-outline"></div></div></div></div>
      </div>
    </div>
  </div>
</div>

  

    <script type="text/javascript">

const airtableToken = "patRdIU76X8UpDiKK.e9bad724a70bf0e4b8fcb9e7d26d89e86c759a4667becad08e07d56406a14562";
const table = "Subway Car Ridership";

Airtable.configure({
    endpointUrl: 'https://api.airtable.com',
    apiKey: airtableToken
});
var base = Airtable.base('appB6vHrDyR6I0t4a');
const allRecords = [];

// Function to fetch all records
async function fetchAllRecords() {
    try {
        await base(table)
            .select({
                view: 'Grid view', // Specify the view if needed
                pageSize: 100,     // Fetch up to 100 records per page
            })
            .eachPage((records, fetchNextPage) => {
                // Add fetched records to the array
                allRecords.push(...records);
                // Fetch the next page
                fetchNextPage();
            });

				/* console.log(allRecords[0]); */
        generateDataPoints();
        graphPointsByNumber();
    } catch (error) {
        console.error('Error fetching records:', error);
    }
}

// Run the function
fetchAllRecords();

function generateDataPoints() {
	allRecords.sort((a, b) => a.fields['Number'] - b.fields['Number']);

	for(let i=0; i < allRecords.length; i++) {
  	let dataObject = allRecords[i].fields;
    let dataID = allRecords[i].id;
    
    generatePoint(dataID, dataObject['Line'], i);
  }
}

function generatePoint(id, line, i) {
	let point = document.createElement("div");

  // Add content to the div (optional)
  point.id = id;
  point.classList.add('data-point');
  point.style.position = 'absolute';
  point.style.transitionDelay = i * 0.005 + 's';
  point.classList.add(getPointColor(line));
  
  createTooltip(point, id);

  // Add the div to the DOM (e.g., to the body)
  document.getElementById("graph-points-wrapper").appendChild(point);
}

function createTooltip(point, id) {
	let tooltipWrapper = document.createElement("div");
   tooltipWrapper.classList.add('tool-tip-wrapper');
  
  let tooltip = document.createElement("div");
  
  let pointData = allRecords.find((data) => data.id === id);
  
  let number = pointData.fields['Number'];
  let type = pointData.fields['Car Type'];
  let line = pointData.fields['Line'];
  
  let numberTitle = document.createElement("h3");
  numberTitle.innerHTML = number;
  
  let typeTitle = document.createElement("h4");
  typeTitle.innerHTML = type;
  let lineTitle = document.createElement("h4");
  lineTitle.innerHTML = line;
  
  let typeLineGroup = document.createElement("div");
  typeLineGroup.appendChild(typeTitle);
  typeLineGroup.appendChild(lineTitle);
  
  typeLineGroup.classList.add('card-group');
  
  tooltip.appendChild(numberTitle);
  tooltip.appendChild(typeLineGroup);

  // Add content to the div (optional)
  tooltip.classList.add('tool-tip');
  
  let tooltipPointOutline = document.createElement("div");
  tooltipPointOutline.classList.add('tool-tip-point-outline');
  

  // Add the div to the DOM (e.g., to the body)
  tooltipWrapper.appendChild(tooltip);
  tooltipWrapper.appendChild(tooltipPointOutline);
  
  point.appendChild(tooltipWrapper);
}

function getPointColor(line) {
	switch(line) {
  	case 'A':
    case 'C':
    case 'E':
    	return 'blue-line';
    case 'B':
    case 'D':
    case 'F':
    case 'M':
    	return 'orange-line';
    case 'G':
    	return 'lime-line';
    case 'L':
    	return 'light-gray-line';
    case 'J':
    case 'Z':
    	return 'brown-line';
    case 'N':
    case 'Q':
    case 'R':
    case 'W':
    	return 'yellow-line';
    case '1':
    case '2':
    case '3':
    	return 'red-line';
    case '4':
    case '5':
    case '6':
    	return 'green-line';
    case '7':
    	return 'purple-line';
    case 'T':
    	return 'turquoise-line';
    case 'S':
    default:
    	return 'gray-line';
  }
}

function graphPointsByNumber() {
	let minMax = getMinMax('Number');
  for(let i=0; i < allRecords.length; i++) {
  	let id = allRecords[i].id;
    let number = allRecords[i].fields['Number'];
    
    let xPos = (Math.round(remapValue(number, minMax.minField, minMax.maxField, 0, 100)*10)/10) + '%';
    let yPos = '50%';

    let point = document.getElementById(id);
    point.style.top = yPos;
    point.style.left = xPos;
  }
  
  setMinMaxLabels(minMax);
}

function setMinMaxLabels(minMax) {
	let axisMin = document.getElementById('axis-minimum');
  axisMin.textContent = minMax.minField;
  
  let axisMax = document.getElementById('axis-maximum');
  axisMax.textContent = minMax.maxField;
}

function getMinMax(field) {
	let minField = 0;
  let maxField = 0;
  for(let i=0; i < allRecords.length; i++) {
  	let data = allRecords[i].fields;
    let value = data[field];
    
    if(i === 0) {
    	minField = value;
      maxField = value;
    } else {
    	if(value < minField) {
    		minField = value;
      }
      if(value > maxField) {
        maxField = value;
      }
    }
  }
  
  let minMax = {
  	'minField': minField,
    'maxField': maxField
  };
  
  return minMax;
}

function remapValue(value, low1, high1, low2, high2) {
	return low2 + (value - low1) * (high2 - low2) / (high1 - low1);
}

function graphPointsByType() {
	let groupedData = groupByProperty('Car Type');

  for(let i=0; i < groupedData.length; i++) {
  	for(let j=0; j < groupedData[i].length; j++) {
    	let id = groupedData[i][j].id;
      let type = groupedData[i][j].fields['Car Type'];

      let xPos = (Math.round(remapValue(i, 0, groupedData.length-1, 0, 100)*10)/10) + '%';
      let yPos = 'calc(50% - calc(10px * ' + j + '))';

      let point = document.getElementById(id);
      point.style.top = yPos;
      point.style.left = xPos;
    }
  }
  
  setMinMaxLabels(minMax);
}

function groupByProperty(property) {
    const grouped = {};

    // Iterate over the array and group objects by the property value
    allRecords.forEach(item => {
        const key = item.fields[property];
        if (!grouped[key]) {
            grouped[key] = [];
        }
        grouped[key].push(item);
    });

    // Convert the grouped object into an array of arrays
    return Object.values(grouped);
}

function groupByDate() {
	const grouped = {};

    // Iterate over the array and group objects by the property value
    allRecords.forEach(item => {
        const key = getDateAsYearValue(item.fields['Ridden Date']);
        if (!grouped[key]) {
            grouped[key] = [];
        }
        grouped[key].push(item);
    });
    
    // Convert the grouped object into an array of arrays
    return Object.values(grouped);
}

function graphPointsByDate() {
	let minMax = getMinMaxDate();
  
  // Iterate over the grouped records
  let groupedByDate = groupByDate();
  
  for(let i=0; i < groupedByDate.length; i++) {
  	for(let j=0; j < groupedByDate[i].length; j++) {
    	let id = groupedByDate[i][j].id;
      let date = getDateAsYearValue(groupedByDate[i][j].fields['Ridden Date']);
      
      let xPos = (Math.round(remapValue(date, minMax.minField, minMax.maxField, 0, 100)*10)/10) + '%';
    	let yPos = 'calc(50% - calc(10px * ' + j + '))';
      
      let point = document.getElementById(id);
      point.style.top = yPos;
      point.style.left = xPos;
    }
  }
  
  setMinMaxLabels(minMax);
}

function getDateAsYearValue(dateString) {
    // Create a Date object from the input string
    const date = new Date(dateString);
    
    // Create a Date object for the start of the year
    const startOfYear = new Date(date.getFullYear(), 0, 0); // January 1, 00:00
    
    // Calculate the difference in milliseconds
    const diff = date - startOfYear;
    
    // Convert the difference to days (milliseconds per day)
    const dayOfYear = Math.floor(diff / (1000 * 60 * 60 * 24));

		let year = date.getFullYear();
    
    let dateAsYearValue = year * 365 + dayOfYear;
    
    return dateAsYearValue;
}

function getMinMaxDate() {
	let minField = 0;
  let maxField = 0;
  for(let i=0; i < allRecords.length; i++) {
  	let data = allRecords[i].fields;
    let value = getDateAsYearValue(data['Ridden Date']);
    
    if(i === 0) {
    	minField = value;
      maxField = value;
    } else {
    	if(value < minField) {
    		minField = value;
      }
      if(value > maxField) {
        maxField = value;
      }
    }
  }
  
  let minMax = {
  	'minField': minField,
    'maxField': maxField
  };
  
  return minMax;
}

function graphPointsByTime() {
  let timeInterval = 15;
	let minMax = {
  	'minField': 0,
    'maxField': Math.ceil(1440/timeInterval)
  };
  
  // Iterate over the grouped records
  let groupedByTimeInterval = groupByTimeIntervals(timeInterval);
  
  for(let i=0; i < groupedByTimeInterval.length; i++) {
  	for(let j=0; j < groupedByTimeInterval[i].length; j++) {
    	let id = groupedByTimeInterval[i][j].id;
      let timeGroup = i;
      
      let xPos = (Math.round(remapValue(i, minMax.minField, minMax.maxField, 0, 100)*10)/10) + '%';
    	let yPos = 'calc(50% - calc(10px * ' + j + '))';
      
      let point = document.getElementById(id);
      point.style.top = yPos;
      point.style.left = xPos;
    }
  }
  
  minMax.minField = '12AM';
  minMax.maxField = '12AM';
  
  setMinMaxLabels(minMax);
}

function groupByTimeIntervals(intervalMinutes = 15) {
    const grouped = [];

    allRecords.forEach(item => {
        // Parse the "Ridden Date" field into a Date object
        const date = new Date(item.fields["Ridden Date"]);
        
        // Extract hours and minutes
        const hours = date.getUTCHours();
        const minutes = date.getUTCMinutes();

        // Calculate the total minutes from midnight
        const totalMinutes = hours * 60 + minutes;

        // Calculate the index of the interval (e.g., 0 for 00:00-00:15, 1 for 00:15-00:30, etc.)
        const intervalIndex = Math.floor(totalMinutes / intervalMinutes);

        // Ensure the array has enough subarrays to store the group at the correct index
        while (grouped.length <= intervalIndex) {
            grouped.push([]);
        }

        // Add the item to the corresponding interval group
        grouped[intervalIndex].push(item);
    });

    return grouped;
}


  </script>

  <script>
    // tell the embed parent frame the height of the content
    if (window.parent && window.parent.parent){
      window.parent.parent.postMessage(["resultsFrame", {
        height: document.body.getBoundingClientRect().height,
        slug: "edtoxkph"
      }], "*")
    }

    // always overwrite window.name, in case users try to set it manually
    window.name = "result"
  </script>

  <script>
    const allLines = []
    const cssElement = document.querySelector("#compiled-css")

    window.addEventListener("message", (message) => {

      if (message.data.css){
        cssElement.textContent = message.data.css.payload
      }

      if (message.data.html){
        document.body.innerHTML = message.data.html.payload
      }
    })
  </script>
</body></html>